name: Java code source scan with SonarQube
branding:
  icon: check
  color: green
inputs:
  host:
    description: "sonar.host.url" 
    required: false
    default: "https://sonarcloud.io"
  organization:
    description: "sonar.organization"
    required: false
    default: "jarvis"
  project:
    description: "sonar.projectKey"
    required: false
    default: "${{ github.repository_owner }}_${{ github.event.repository.name }}"
  version:
    description: "maven plugin version"
    required: false
    default: 4.0.0.4121
runs:
  using: "composite"
  steps:
    - name: Build and scan source code 
      #env:
        #SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}
      run: mvn --batch-mode --no-transfer-progress verify org.sonarsource.scanner.maven:sonar-maven-plugin:4.0.0.4121:sonar -Dsonar.projectKey=${{ inputs.project }} -Dsonar.organization=${{ inputs.organization }} -Dsonar.host.url=${{ inputs.host }}
