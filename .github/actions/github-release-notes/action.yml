name: Create GitHub Release with Auto-Generated Notes
inputs:
  version:
    description: "Version of the project to be released"
    required: true
  draft:
    description: "Indicates if the release is a draft"
    type: boolean
    required: false
    default: false
runs:
  using: "composite"
  steps:
  - name: cleanup release
    shell: bash
    if: ${{ inputs.draft }}
    run: gh release delete -y --cleanup-tag "v${{ inputs.version }}"
  - name: Generate and Publish GitHub Release
    shell: bash
    run: |
      gh release create "v${{ inputs.version }}" \
        --repo="${{ github.repository }}" \
        --target="${{ github.ref_name }}" \
        --title="v${{ inputs.version }}" \
        --generate-notes \
        ${{ inputs.draft && '--draft' }}